// 記憶字典：兩個注音編碼組合成一個單字
export type MemoryWord = string

// 記憶字典表：key 是兩個編碼的組合 (例如 "ㄅㄅ", "ㄅㄆ")
export type MemoryWordDict = Record<string, MemoryWord>

// 默認記憶字典（根據用戶提供的完整表格）
// 表格：上方=列標題（第一個編碼），左側=行標題（第二個編碼）
// 字典鍵格式：列標題 + 行標題
export const DEFAULT_MEMORY_WORDS: MemoryWordDict = {
  // ㄅ 列（上方）× 各行（左側）
  'ㄅㄅ': '筆', 'ㄅㄆ': '鞭炮', 'ㄅㄇ': '幫忙', 'ㄅㄈ': '病房', 'ㄅㄉ': '病毒', 'ㄅㄊ': '布條', 'ㄅㄋ': '南部', 'ㄅㄌ': '玻璃',
  'ㄅㄍ': '包裹', 'ㄅㄎ': '冰塊', 'ㄅㄏ': '百貨', 'ㄅㄐ': '北京', 'ㄅㄑ': '北七', 'ㄅㄒ': '冰箱', 'ㄅㄓ': '報紙', 'ㄅㄔ': '白痴',
  'ㄅㄕ': '巴士', 'ㄅㄖ': '白人', 'ㄅㄗ': '鼻子', 'ㄅㄘ': '白菜', 'ㄅㄙ': '白色', 'ㄅ1': '畢業',

  // ㄆ 列（上方）× 各行（左側）
  'ㄆㄅ': '屁鼻', 'ㄆㄆ': '泡泡', 'ㄆㄇ': '泡麵', 'ㄆㄈ': '皮膚', 'ㄆㄉ': '屏東', 'ㄆㄊ': '葡萄', 'ㄆㄋ': '叛逆', 'ㄆㄌ': '漂亮',
  'ㄆㄍ': '蘋果', 'ㄆㄎ': '拋開', 'ㄆㄏ': '澎湖', 'ㄆㄐ': '啤酒', 'ㄆㄑ': '脾氣', 'ㄆㄒ': '螃蟹', 'ㄆㄓ': '拍照', 'ㄆㄔ': '破產',
  'ㄆㄕ': '拍手', 'ㄆㄖ': '騙人', 'ㄆㄗ': '胖子', 'ㄆㄘ': '泡菜', 'ㄆㄙ': '披薩', 'ㄆ1': '便宜',

  // ㄇ 列（上方）× 各行（左側）
  'ㄇㄅ': '麵包', 'ㄇㄆ': '名牌', 'ㄇㄇ': '媽媽', 'ㄇㄈ': '模仿', 'ㄇㄉ': '媽的', 'ㄇㄊ': '明天', 'ㄇㄋ': '每年', 'ㄇㄌ': '麻辣',
  'ㄇㄍ': '美國', 'ㄇㄎ': '沒空', 'ㄇㄏ': '漫畫', 'ㄇㄐ': '盲解', 'ㄇㄑ': '默契', 'ㄇㄒ': '麵線', 'ㄇㄓ': '面紙', 'ㄇㄔ': '抹茶',
  'ㄇㄕ': '魔術', 'ㄇㄖ': '盲人', 'ㄇㄗ': '帽子', 'ㄇㄘ': '漫才', 'ㄇㄙ': '民宿', 'ㄇ1': '沒有',

  // ㄈ 列（上方）× 各行（左側）
  'ㄈㄅ': '富邦', 'ㄈㄆ': '放屁', 'ㄈㄇ': '蜂蜜', 'ㄈㄈ': '夫婦', 'ㄈㄉ': '飯店', 'ㄈㄊ': '飯糰', 'ㄈㄋ': '憤怒', 'ㄈㄌ': '鳳梨',
  'ㄈㄍ': '法國', 'ㄈㄎ': '瘋狂', 'ㄈㄏ': '粉紅', 'ㄈㄐ': '飛機', 'ㄈㄑ': '番茄', 'ㄈㄒ': '分享', 'ㄈㄓ': '非洲', 'ㄈㄔ': '帆船',
  'ㄈㄕ': '法師', 'ㄈㄖ': '犯人', 'ㄈㄗ': '房子', 'ㄈㄘ': '粉刺', 'ㄈㄙ': '粉絲', 'ㄈ1': '肺炎',

  // ㄉ 列（上方）× 各行（左側）
  'ㄉㄅ': '大便', 'ㄉㄆ': '燈泡', 'ㄉㄇ': '動漫', 'ㄉㄈ': '豆腐', 'ㄉㄉ': '弟弟', 'ㄉㄊ': '地圖', 'ㄉㄋ': '電腦', 'ㄉㄌ': '獨立',
  'ㄉㄍ': '蛋糕', 'ㄉㄎ': '打開', 'ㄉㄏ': '動畫', 'ㄉㄐ': '東京', 'ㄉㄑ': '地球', 'ㄉㄒ': '大型', 'ㄉㄓ': '地震', 'ㄉㄔ': '電池',
  'ㄉㄕ': '電視', 'ㄉㄖ': '打人', 'ㄉㄗ': '肚子', 'ㄉㄘ': '稻草', 'ㄉㄙ': '打掃', 'ㄉ1': '電影',

  // ㄊ 列（上方）× 各行（左側）
  'ㄊㄅ': '台北', 'ㄊㄆ': '天秤', 'ㄊㄇ': '透明', 'ㄊㄈ': '頭髮', 'ㄊㄉ': '他的', 'ㄊㄊ': '太太', 'ㄊㄋ': '台南', 'ㄊㄌ': '體力',
  'ㄊㄍ': '泰國', 'ㄊㄎ': '痛苦', 'ㄊㄏ': '土豪', 'ㄊㄐ': '條件', 'ㄊㄑ': '天氣', 'ㄊㄒ': '同學', 'ㄊㄓ': '桃子', 'ㄊㄔ': '湯匙',
  'ㄊㄕ': '天使', 'ㄊㄖ': '鐵人', 'ㄊㄗ': '兔子', 'ㄊㄘ': '陶瓷', 'ㄊㄙ': '吐司', 'ㄊ1': '太陽',

  // ㄋ 列（上方）× 各行（左側）
  'ㄋㄅ': '尿布', 'ㄋㄆ': '牛排', 'ㄋㄇ': '檸檬', 'ㄋㄈ': '奶粉', 'ㄋㄉ': '你的', 'ㄋㄊ': '奶頭', 'ㄋㄋ': '尿尿', 'ㄋㄌ': '能力',
  'ㄋㄍ': '南港', 'ㄋㄎ': '內褲', 'ㄋㄏ': '南韓', 'ㄋㄐ': '南京', 'ㄋㄑ': '拿起', 'ㄋㄒ': '逆向', 'ㄋㄓ': '鬧鐘', 'ㄋㄔ': '奶茶',
  'ㄋㄕ': '女神', 'ㄋㄖ': '男人', 'ㄋㄗ': '牛仔', 'ㄋㄘ': '年菜', 'ㄋㄙ': 'Nurse', 'ㄋ1': '尿液',

  // ㄌ 列（上方）× 各行（左側）
  'ㄌㄅ': '老闆', 'ㄌㄆ': '老婆', 'ㄌㄇ': '拉麵', 'ㄌㄈ': '魯夫', 'ㄌㄉ': '兩點', 'ㄌㄊ': '樂天', 'ㄌㄋ': '老娘', 'ㄌㄌ': '綠綠',
  'ㄌㄍ': '寮國', 'ㄌㄎ': '林口', 'ㄌㄏ': '老虎', 'ㄌㄐ': '垃圾', 'ㄌㄑ': '籃球', 'ㄌㄒ': '濾芯', 'ㄌㄓ': '荔枝', 'ㄌㄔ': '纜車',
  'ㄌㄕ': '老師', 'ㄌㄖ': '老人', 'ㄌㄗ': '輪子', 'ㄌㄘ': '冷藏', 'ㄌㄙ': '綠色', 'ㄌ1': '旅遊',

  // ㄍ 列（上方）× 各行（左側）
  'ㄍㄅ': '隔壁', 'ㄍㄆ': '股票', 'ㄍㄇ': '感冒', 'ㄍㄈ': '公分', 'ㄍㄉ': '更多', 'ㄍㄊ': '高鐵', 'ㄍㄋ': '過年', 'ㄍㄌ': '老公',
  'ㄍㄍ': '哥哥', 'ㄍㄎ': '功課', 'ㄍㄏ': '公會', 'ㄍㄐ': '冠軍', 'ㄍㄑ': '國旗', 'ㄍㄒ': '高雄', 'ㄍㄓ': '果汁', 'ㄍㄔ': '公車',
  'ㄍㄕ': '股市', 'ㄍㄖ': '工人', 'ㄍㄗ': '鴿子', 'ㄍㄘ': '棺材', 'ㄍㄙ': '公司', 'ㄍ1': '故意',

  // ㄎ 列（上方）× 各行（左側）
  'ㄎㄅ': '課本', 'ㄎㄆ': '卡片', 'ㄎㄇ': '開門', 'ㄎㄈ': '咖啡', 'ㄎㄉ': '看到', 'ㄎㄊ': '卡通', 'ㄎㄋ': '柯南', 'ㄎㄌ': '恐龍',
  'ㄎㄍ': '跨國', 'ㄎㄎ': '可可', 'ㄎㄏ': '開花', 'ㄎㄐ': '柯基', 'ㄎㄑ': '孔雀', 'ㄎㄒ': '可惜', 'ㄎㄓ': '口罩', 'ㄎㄔ': '卡車',
  'ㄎㄕ': '考試', 'ㄎㄖ': '客人', 'ㄎㄗ': '褲子', 'ㄎㄘ': '庫存', 'ㄎㄙ': '咳嗽', 'ㄎ1': '抗議',

  // ㄏ 列（上方）× 各行（左側）
  'ㄏㄅ': '紅包', 'ㄏㄆ': '花瓶', 'ㄏㄇ': '號碼', 'ㄏㄈ': '合法', 'ㄏㄉ': '活動', 'ㄏㄊ': '海灘', 'ㄏㄋ': '核能', 'ㄏㄌ': '花蓮',
  'ㄏㄍ': '韓國', 'ㄏㄎ': '駭客', 'ㄏㄏ': '畫畫', 'ㄏㄐ': '黃金', 'ㄏㄑ': '環球', 'ㄏㄒ': '海嘯', 'ㄏㄓ': '會長', 'ㄏㄔ': '火車',
  'ㄏㄕ': '護士', 'ㄏㄖ': '黑人', 'ㄏㄗ': '猴子', 'ㄏㄘ': '好慘', 'ㄏㄙ': '黃色', 'ㄏ1': '海洋',

  // ㄐ 列（上方）× 各行（左側）
  'ㄐㄅ': '肩膀', 'ㄐㄆ': '機票', 'ㄐㄇ': '金門', 'ㄐㄈ': '減肥', 'ㄐㄉ': '監督', 'ㄐㄊ': '吉他', 'ㄐㄋ': '今年', 'ㄐㄌ': '記錄',
  'ㄐㄍ': '幾個', 'ㄐㄎ': '雞塊', 'ㄐㄏ': '結婚', 'ㄐㄐ': '雞雞', 'ㄐㄑ': '機器', 'ㄐㄒ': '簡訊', 'ㄐㄓ': '記者', 'ㄐㄔ': '雞翅',
  'ㄐㄕ': '機師', 'ㄐㄖ': '巨人', 'ㄐㄗ': '鏡子', 'ㄐㄘ': '眷村', 'ㄐㄙ': '雞絲', 'ㄐ1': '加油',

  // ㄑ 列（上方）× 各行（左側）
  'ㄑㄅ': '錢包', 'ㄑㄆ': '青埔', 'ㄑㄇ': '簽名', 'ㄑㄈ': '欺負', 'ㄑㄉ': '球隊', 'ㄑㄊ': '其他', 'ㄑㄋ': '去年', 'ㄑㄌ': '全聯',
  'ㄑㄍ': '全國', 'ㄑㄎ': '情況', 'ㄑㄏ': '求婚', 'ㄑㄐ': '奇蹟', 'ㄑㄑ': '氣球', 'ㄑㄒ': '傾向', 'ㄑㄓ': '確診', 'ㄑㄔ': '球場',
  'ㄑㄕ': '騎士', 'ㄑㄖ': '窮人', 'ㄑㄗ': '全家', 'ㄑㄘ': '青菜', 'ㄑㄙ': '起司', 'ㄑ1': '企業',

  // ㄒ 列（上方）× 各行（左側）
  'ㄒㄅ': '新北', 'ㄒㄆ': '蝦皮', 'ㄒㄇ': '下面', 'ㄒㄈ': '稀飯', 'ㄒㄉ': '兄弟', 'ㄒㄊ': '夏天', 'ㄒㄋ': '虛擬', 'ㄒㄌ': '行李',
  'ㄒㄍ': '香港', 'ㄒㄎ': '汐科', 'ㄒㄏ': '小孩', 'ㄒㄐ': '香蕉', 'ㄒㄑ': '星球', 'ㄒㄒ': '蝦', 'ㄒㄓ': '汐止', 'ㄒㄔ': '小吃',
  'ㄒㄕ': '學生', 'ㄒㄖ': '小人', 'ㄒㄗ': '鞋子', 'ㄒㄘ': '香菜', 'ㄒㄙ': '笑死', 'ㄒ1': '蜥蜴',

  // ㄓ 列（上方）× 各行（左側）
  'ㄓㄅ': '職棒', 'ㄓㄆ': '帳篷', 'ㄓㄇ': '週末', 'ㄓㄈ': '政府', 'ㄓㄉ': '炸彈', 'ㄓㄊ': '枕頭', 'ㄓㄋ': '支那', 'ㄓㄌ': '蟑螂',
  'ㄓㄍ': '中國', 'ㄓㄎ': '週刊', 'ㄓㄏ': '中華', 'ㄓㄐ': '炸雞', 'ㄓㄑ': '桌球', 'ㄓㄒ': '中信', 'ㄓㄓ': '中職', 'ㄓㄔ': '智齒',
  'ㄓㄕ': '桌上', 'ㄓㄖ': '主人', 'ㄓㄗ': '桌子', 'ㄓㄘ': '中餐', 'ㄓㄙ': '竹筍', 'ㄓ1': '桌遊',

  // ㄔ 列（上方）× 各行（左側）
  'ㄔㄅ': '翅膀', 'ㄔㄆ': '鈔票', 'ㄔㄇ': '車門', 'ㄔㄈ': '吃飯', 'ㄔㄉ': '超屌', 'ㄔㄊ': '傳統', 'ㄔㄋ': '成年', 'ㄔㄌ': '出爐',
  'ㄔㄍ': '出國', 'ㄔㄎ': '乘客', 'ㄔㄏ': '窗戶', 'ㄔㄐ': '出局', 'ㄔㄑ': '傳奇', 'ㄔㄒ': '出現', 'ㄔㄓ': '車站', 'ㄔㄔ': '出場',
  'ㄔㄕ': '吃屎', 'ㄔㄖ': '超人', 'ㄔㄗ': '車子', 'ㄔㄘ': '吃醋', 'ㄔㄙ': '超速', 'ㄔ1': '抽菸',

  // ㄕ 列（上方）× 各行（左側）
  'ㄕㄅ': '士兵', 'ㄕㄆ': '山坡', 'ㄕㄇ': '上面', 'ㄕㄈ': '師傅', 'ㄕㄉ': '商店', 'ㄕㄊ': '石頭', 'ㄕㄋ': '少年', 'ㄕㄌ': '濕了',
  'ㄕㄍ': '水果', 'ㄕㄎ': '上課', 'ㄕㄏ': '石化', 'ㄕㄐ': '手機', 'ㄕㄑ': '生氣', 'ㄕㄒ': '數學', 'ㄕㄓ': '時鐘', 'ㄕㄔ': '市場',
  'ㄕㄕ': '手術', 'ㄕㄖ': '生日', 'ㄕㄗ': '獅子', 'ㄕㄘ': '水槽', 'ㄕㄙ': '殺死', 'ㄕ1': '失憶',

  // ㄖ 列（上方）× 各行（左側）
  'ㄖㄅ': '日本', 'ㄖㄆ': '肉片', 'ㄖㄇ': '熱門', 'ㄖㄈ': '染髮', 'ㄖㄉ': '弱點', 'ㄖㄊ': '軟體', 'ㄖㄋ': '熱鬧', 'ㄖㄌ': '日曆',
  'ㄖㄍ': '熱狗', 'ㄖㄎ': '入口', 'ㄖㄏ': '融化', 'ㄖㄐ': '日記', 'ㄖㄑ': '日期', 'ㄖㄒ': '熱心', 'ㄖㄓ': '忍者', 'ㄖㄔ': '日出',
  'ㄖㄕ': '日式', 'ㄖㄖ': '肉', 'ㄖㄗ': '肉粽', 'ㄖㄘ': '仁慈', 'ㄖㄙ': '肉絲', 'ㄖ1': '乳液',

  // ㄗ 列（上方）× 各行（左側）
  'ㄗㄅ': '左邊', 'ㄗㄆ': '自拍', 'ㄗㄇ': '做夢', 'ㄗㄈ': '自費', 'ㄗㄉ': '自大', 'ㄗㄊ': '昨天', 'ㄗㄋ': '災難', 'ㄗㄌ': '資歷',
  'ㄗㄍ': '資格', 'ㄗㄎ': '最快', 'ㄗㄏ': '組合', 'ㄗㄐ': '自己', 'ㄗㄑ': '子祁', 'ㄗㄒ': '造型', 'ㄗㄓ': '雜誌', 'ㄗㄔ': '租車',
  'ㄗㄕ': '姿勢', 'ㄗㄖ': '族人', 'ㄗㄗ': '姊姊', 'ㄗㄘ': '早餐', 'ㄗㄙ': '紫色', 'ㄗ1': '左營',

  // ㄘ 列（上方）× 各行（左側）
  'ㄘㄅ': '挫冰', 'ㄘㄆ': '裁判', 'ㄘㄇ': '聰明', 'ㄘㄈ': '殘廢', 'ㄘㄉ': '菜單', 'ㄘㄊ': '餐廳', 'ㄘㄋ': '菜鳥', 'ㄘㄌ': '測量',
  'ㄘㄍ': '參觀', 'ㄘㄎ': '刺客', 'ㄘㄏ': '彩虹', 'ㄘㄐ': '餐具', 'ㄘㄑ': '刺青', 'ㄘㄒ': '從小', 'ㄘㄓ': '殘障', 'ㄘㄔ': '操場',
  'ㄘㄕ': '刺殺', 'ㄘㄖ': '脆弱', 'ㄘㄗ': '存在', 'ㄘㄘ': '曹操', 'ㄘㄙ': '廁所', 'ㄘ1': '蒼蠅',

  // ㄙ 列（上方）× 各行（左側）
  'ㄙㄅ': '鬆餅', 'ㄙㄆ': '賽跑', 'ㄙㄇ': '寺廟', 'ㄙㄈ': '私房', 'ㄙㄉ': '速度', 'ㄙㄊ': '蒜頭', 'ㄙㄋ': '思念', 'ㄙㄌ': '死了',
  'ㄙㄍ': '三國', 'ㄙㄎ': '思考', 'ㄙㄏ': '送貨', 'ㄙㄐ': '司機', 'ㄙㄑ': '死去', 'ㄙㄒ': '三星', 'ㄙㄓ': '四肢', 'ㄙㄔ': '賽車',
  'ㄙㄕ': '宿舍', 'ㄙㄖ': '死人', 'ㄙㄗ': '嫂子', 'ㄙㄘ': '三餐', 'ㄙㄙ': '傘', 'ㄙ1': '素顏',

  // 1 列（上方）× 各行（左側）
  '1ㄅ': '一百', '1ㄆ': '影片', '1ㄇ': '櫻木', '1ㄈ': '衣服', '1ㄉ': '印度', '1ㄊ': '洋投', '1ㄋ': '印尼', '1ㄌ': '飲料',
  '1ㄍ': '一個', '1ㄎ': '眼科', '1ㄏ': '櫻花', '1ㄐ': '眼鏡', '1ㄑ': '一起', '1ㄒ': '遊戲', '1ㄓ': '亞洲', '1ㄔ': '夜衝',
  '1ㄕ': '醫師', '1ㄖ': '藝人', '1ㄗ': '葉子', '1ㄘ': '一次', '1ㄙ': '顏色', '11': '爺爺',
}

// 生成記憶字的提示文字（用於編輯時）
export function getMemoryWordKey(code1: string, code2: string): string {
  return `${code1}${code2}`
}

// 獲取記憶字，如果沒有則返回"未定"
export function getMemoryWord(dict: MemoryWordDict, code1: string, code2: string): string {
  const key = getMemoryWordKey(code1, code2)
  return dict[key] || '未定'
}

// 將編碼序列轉換為帶記憶字的字串
// 格式：ㄎ ㄊ ㄔ ㄍ ㄙ ㄖ (痛苦 公車 未定)
// showWords: true 顯示記憶字，false 隱藏記憶字
export function formatMemoWithWords(memo: string, dict: MemoryWordDict, showWords: boolean = true): string {
  const codes = memo.split(' ').filter(c => c.length > 0)

  // 原始編碼保持不變
  const codesStr = codes.join(' ')

  if (!showWords) {
    return codesStr
  }

  // 收集記憶字（兩個一組）
  const words: string[] = []
  for (let i = 0; i < codes.length; i += 2) {
    const code1 = codes[i]
    const code2 = codes[i + 1]

    if (code2) {
      // 有配對，直接查找：code1 + code2
      const word = getMemoryWord(dict, code1, code2)
      words.push(word)
    } else {
      // 奇數個，最後一個單獨，查找重複組合（code1 + code1）
      const word = getMemoryWord(dict, code1, code1)
      words.push(word)
    }
  }

  // 如果有記憶字，加上括號
  if (words.length > 0) {
    return `${codesStr} (${words.join(' ')})`
  }

  return codesStr
}
