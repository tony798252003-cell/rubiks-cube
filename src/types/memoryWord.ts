// 記憶字典：兩個注音編碼組合成一個單字
export type MemoryWord = string

// 記憶字典表：key 是兩個編碼的組合 (例如 "ㄅㄅ", "ㄅㄆ")
export type MemoryWordDict = Record<string, MemoryWord>

// 默認記憶字典（根據用戶提供的表格）
// 表格上方是第一個編碼，左側是第二個編碼
export const DEFAULT_MEMORY_WORDS: MemoryWordDict = {
  // 第一個編碼：ㄅ
  'ㄅㄅ': '爸爸', 'ㄆㄅ': '屁鼻', 'ㄇㄅ': '麵包', 'ㄈㄅ': '富邦', 'ㄉㄅ': '大便', 'ㄊㄅ': '台北', 'ㄋㄅ': '內部', 'ㄌㄅ': '老闆',
  'ㄍㄅ': '隔壁', 'ㄎㄅ': '靠盃', 'ㄏㄅ': '夥伴', 'ㄐㄅ': '雞掰', 'ㄑㄅ': '全部', 'ㄒㄅ': '新北', 'ㄓㄅ': '職棒', 'ㄔㄅ': '翅膀',
  'ㄕㄅ': '失敗', 'ㄖㄅ': '日本', 'ㄗㄅ': '左邊', 'ㄘㄅ': '挫冰', 'ㄙㄅ': '三寶',

  // 第一個編碼：ㄆ
  'ㄅㄆ': '背叛', 'ㄆㄆ': '泡泡', 'ㄇㄆ': '名牌', 'ㄈㄆ': '放屁', 'ㄉㄆ': '搭配', 'ㄊㄆ': '圖片', 'ㄋㄆ': '牛排', 'ㄌㄆ': '老婆',
  'ㄍㄆ': '股票', 'ㄎㄆ': '卡片', 'ㄏㄆ': '害怕', 'ㄐㄆ': '機票', 'ㄑㄆ': '強迫', 'ㄒㄆ': '蝦皮', 'ㄓㄆ': '照片', 'ㄔㄆ': '產品',
  'ㄕㄆ': '商品', 'ㄖㄆ': '人品', 'ㄗㄆ': '自拍', 'ㄘㄆ': '裁判', 'ㄙㄆ': '賽跑',

  // 第一個編碼：ㄇ
  'ㄅㄇ': '幫忙', 'ㄆㄇ': '泡麵', 'ㄇㄇ': '媽媽', 'ㄈㄇ': '蜂蜜', 'ㄉㄇ': '動漫', 'ㄊㄇ': '他們', 'ㄋㄇ': '你們', 'ㄌㄇ': '拉麵',
  'ㄍㄇ': '感冒', 'ㄎㄇ': '開門', 'ㄏㄇ': '號碼', 'ㄐㄇ': '金門', 'ㄑㄇ': '簽名', 'ㄒㄇ': '下面', 'ㄓㄇ': '週末', 'ㄔㄇ': '充滿',
  'ㄕㄇ': '上面', 'ㄖㄇ': '熱門', 'ㄗㄇ': '怎麼', 'ㄘㄇ': '聰明', 'ㄙㄇ': '寺廟',

  // 第一個編碼：ㄈ
  'ㄅㄈ': '爆發', 'ㄆㄈ': '票房', 'ㄇㄈ': '模仿', 'ㄈㄈ': '夫婦', 'ㄉㄈ': '豆腐', 'ㄊㄈ': '頭髮', 'ㄋㄈ': '奶粉', 'ㄌㄈ': '魯夫',
  'ㄍㄈ': '公分', 'ㄎㄈ': '咖啡', 'ㄏㄈ': '合法', 'ㄐㄈ': '減肥', 'ㄑㄈ': '氣氛', 'ㄒㄈ': '稀飯', 'ㄓㄈ': '政府', 'ㄔㄈ': '吃飯',
  'ㄕㄈ': '師傅', 'ㄖㄈ': '染髮', 'ㄗㄈ': '自費', 'ㄘㄈ': '殘廢', 'ㄙㄈ': '私房',

  // 第一個編碼：ㄉ
  'ㄅㄉ': '病毒', 'ㄆㄉ': '屏東', 'ㄇㄉ': '媽的', 'ㄈㄉ': '飯店', 'ㄉㄉ': '弟弟', 'ㄊㄉ': '他的', 'ㄋㄉ': '你的', 'ㄌㄉ': '兩點',
  'ㄍㄉ': '更多', 'ㄎㄉ': '看到', 'ㄏㄉ': '活動', 'ㄐㄉ': '覺得', 'ㄑㄉ': '確定', 'ㄒㄉ': '兄弟', 'ㄓㄉ': '知道', 'ㄔㄉ': '超屌',
  'ㄕㄉ': '商店', 'ㄖㄉ': '弱點', 'ㄗㄉ': '自大', 'ㄘㄉ': '菜單', 'ㄙㄉ': '速度',

  // 第一個編碼：ㄊ
  'ㄅㄊ': '不同', 'ㄆㄊ': '葡萄', 'ㄇㄊ': '明天', 'ㄈㄊ': '飯糰', 'ㄉㄊ': '地圖', 'ㄊㄊ': '太太', 'ㄋㄊ': '奶頭', 'ㄌㄊ': '樂天',
  'ㄍㄊ': '高鐵', 'ㄎㄊ': '卡通', 'ㄏㄊ': '海灘', 'ㄐㄊ': '吉他', 'ㄑㄊ': '其他', 'ㄒㄊ': '夏天', 'ㄓㄊ': '枕頭', 'ㄔㄊ': '傳統',
  'ㄕㄊ': '石頭', 'ㄖㄊ': '軟體', 'ㄗㄊ': '昨天', 'ㄘㄊ': '餐廳', 'ㄙㄊ': '痠痛',

  // 第一個編碼：ㄋ
  'ㄅㄋ': '南部', 'ㄆㄋ': '叛逆', 'ㄇㄋ': '每年', 'ㄈㄋ': '憤怒', 'ㄉㄋ': '電腦', 'ㄊㄋ': '台南', 'ㄋㄋ': '尿尿', 'ㄌㄋ': '老娘',
  'ㄍㄋ': '過年', 'ㄎㄋ': '柯南', 'ㄏㄋ': '核能', 'ㄐㄋ': '今年', 'ㄑㄋ': '去年', 'ㄒㄋ': '虛擬', 'ㄓㄋ': '支那', 'ㄔㄋ': '成年',
  'ㄕㄋ': '少年', 'ㄖㄋ': '熱鬧', 'ㄗㄋ': '災難', 'ㄘㄋ': '菜鳥', 'ㄙㄋ': '思念',

  // 第一個編碼：ㄌ
  'ㄅㄌ': '玻璃', 'ㄆㄌ': '漂亮', 'ㄇㄌ': '麻辣', 'ㄈㄌ': '鳳梨', 'ㄉㄌ': '獨立', 'ㄊㄌ': '體力', 'ㄋㄌ': '能力', 'ㄌㄌ': '綠綠',
  'ㄍㄌ': '老公', 'ㄎㄌ': '恐龍', 'ㄏㄌ': '好了', 'ㄐㄌ': '記錄', 'ㄑㄌ': '去了', 'ㄒㄌ': '行李', 'ㄓㄌ': '這裡', 'ㄔㄌ': '吃力',
  'ㄕㄌ': '濕了', 'ㄖㄌ': '日曆', 'ㄗㄌ': '資歷', 'ㄘㄌ': '測量', 'ㄙㄌ': '死了',

  // 第一個編碼：ㄍ
  'ㄅㄍ': '包裹', 'ㄆㄍ': '蘋果', 'ㄇㄍ': '美國', 'ㄈㄍ': '法國', 'ㄉㄍ': '蛋糕', 'ㄊㄍ': '泰國', 'ㄋㄍ': '那個', 'ㄌㄍ': '寮國',
  'ㄍㄍ': '哥哥', 'ㄎㄍ': '跨國', 'ㄏㄍ': '韓國', 'ㄐㄍ': '幾個', 'ㄑㄍ': '全國', 'ㄒㄍ': '香港', 'ㄓㄍ': '這個', 'ㄔㄍ': '出國',
  'ㄕㄍ': '水果', 'ㄖㄍ': '如果', 'ㄗㄍ': '資格', 'ㄘㄍ': '參觀', 'ㄙㄍ': '三國',

  // 第一個編碼：ㄎ
  'ㄅㄎ': '避開', 'ㄆㄎ': '拋開', 'ㄇㄎ': '沒空', 'ㄈㄎ': '瘋狂', 'ㄉㄎ': '打開', 'ㄊㄎ': '痛苦', 'ㄋㄎ': '內褲', 'ㄌㄎ': '林口',
  'ㄍㄎ': '功課', 'ㄎㄎ': '可可', 'ㄏㄎ': '好看', 'ㄐㄎ': '雞塊', 'ㄑㄎ': '情況', 'ㄒㄎ': '汐科', 'ㄓㄎ': '折扣', 'ㄔㄎ': '乘客',
  'ㄕㄎ': '上課', 'ㄖㄎ': '入口', 'ㄗㄎ': '最快', 'ㄘㄎ': '刺客', 'ㄙㄎ': '思考',

  // 第一個編碼：ㄏ
  'ㄅㄏ': '百貨', 'ㄆㄏ': '澎湖', 'ㄇㄏ': '漫畫', 'ㄈㄏ': '粉紅', 'ㄉㄏ': '動畫', 'ㄊㄏ': '土豪', 'ㄋㄏ': '你好', 'ㄌㄏ': '老虎',
  'ㄍㄏ': '剛好', 'ㄎㄏ': '開花', 'ㄏㄏ': '畫畫', 'ㄐㄏ': '結婚', 'ㄑㄏ': '求婚', 'ㄒㄏ': '小孩', 'ㄓㄏ': '中華', 'ㄔㄏ': '吃喝',
  'ㄕㄏ': '社會', 'ㄖㄏ': '融化', 'ㄗㄏ': '組合', 'ㄘㄏ': '彩虹', 'ㄙㄏ': '送貨',

  // 第一個編碼：ㄐ
  'ㄅㄐ': '北京', 'ㄆㄐ': '啤酒', 'ㄇㄐ': '盲解', 'ㄈㄐ': '飛機', 'ㄉㄐ': '東京', 'ㄊㄐ': '條件', 'ㄋㄐ': '南京', 'ㄌㄐ': '垃圾',
  'ㄍㄐ': '冠軍', 'ㄎㄐ': '柯基', 'ㄏㄐ': '黃金', 'ㄐㄐ': '雞雞', 'ㄑㄐ': '奇蹟', 'ㄒㄐ': '香蕉', 'ㄓㄐ': '炸雞', 'ㄔㄐ': '出局',
  'ㄕㄐ': '手機', 'ㄖㄐ': '日記', 'ㄗㄐ': '自己', 'ㄘㄐ': '餐具', 'ㄙㄐ': '司機',

  // 第一個編碼：ㄑ
  'ㄅㄑ': '北七', 'ㄆㄑ': '脾氣', 'ㄇㄑ': '默契', 'ㄈㄑ': '番茄', 'ㄉㄑ': '地球', 'ㄊㄑ': '天氣', 'ㄋㄑ': '拿起', 'ㄌㄑ': '籃球',
  'ㄍㄑ': '國旗', 'ㄎㄑ': '孔雀', 'ㄏㄑ': '環球', 'ㄐㄑ': '機器', 'ㄑㄑ': '氣球', 'ㄒㄑ': '星球', 'ㄓㄑ': '桌球', 'ㄔㄑ': '傳奇',
  'ㄕㄑ': '生氣', 'ㄖㄑ': '日期', 'ㄗㄑ': '子祁', 'ㄘㄑ': '刺青', 'ㄙㄑ': '死去',

  // 第一個編碼：ㄒ
  'ㄅㄒ': '冰箱', 'ㄆㄒ': '螃蟹', 'ㄇㄒ': '麵線', 'ㄈㄒ': '分享', 'ㄉㄒ': '大型', 'ㄊㄒ': '同學', 'ㄋㄒ': '逆向', 'ㄌㄒ': '濾芯',
  'ㄍㄒ': '高雄', 'ㄎㄒ': '可惜', 'ㄏㄒ': '海嘯', 'ㄐㄒ': '簡訊', 'ㄑㄒ': '傾向', 'ㄒㄒ': '蝦', 'ㄓㄒ': '中信', 'ㄔㄒ': '出現',
  'ㄕㄒ': '數學', 'ㄖㄒ': '熱心', 'ㄗㄒ': '造型', 'ㄘㄒ': '從小', 'ㄙㄒ': '三星',

  // 第一個編碼：ㄓ
  'ㄅㄓ': '報紙', 'ㄆㄓ': '拍照', 'ㄇㄓ': '面紙', 'ㄈㄓ': '非洲', 'ㄉㄓ': '地震', 'ㄊㄓ': '桃子', 'ㄋㄓ': '鬧鐘', 'ㄌㄓ': '荔枝',
  'ㄍㄓ': '果汁', 'ㄎㄓ': '口罩', 'ㄏㄓ': '會長', 'ㄐㄓ': '記者', 'ㄑㄓ': '確診', 'ㄒㄓ': '汐止', 'ㄓㄓ': '中職', 'ㄔㄓ': '車站',
  'ㄕㄓ': '時鐘', 'ㄖㄓ': '忍者', 'ㄗㄓ': '雜誌', 'ㄘㄓ': '殘障', 'ㄙㄓ': '四肢',

  // 第一個編碼：ㄔ
  'ㄅㄔ': '白痴', 'ㄆㄔ': '破產', 'ㄇㄔ': '抹茶', 'ㄈㄔ': '帆船', 'ㄉㄔ': '電池', 'ㄊㄔ': '湯匙', 'ㄋㄔ': '奶茶', 'ㄌㄔ': '纜車',
  'ㄍㄔ': '公車', 'ㄐㄔ': '雞翅', 'ㄒㄔ': '小吃',

  // 第一個編碼：ㄕ
  'ㄇㄕ': '法師', 'ㄊㄕ': '天使', 'ㄌㄕ': '可是', 'ㄍㄕ': '或是', 'ㄖㄕ': '認識',

  // 第一個編碼：ㄖ
  'ㄌㄖ': '烤肉', 'ㄑㄖ': '確認',

  // 第一個編碼：ㄗ
  'ㄗㄗ': '存在',

  // 第一個編碼：ㄘ
  'ㄐㄘ': '下次', 'ㄖㄘ': '仁慈', 'ㄅㄘ': '早餐',

  // 第一個編碼：ㄙ
  'ㄅㄙ': '比賽', 'ㄇㄙ': '民宿', 'ㄈㄙ': '粉絲', 'ㄊㄙ': 'Nurse', 'ㄍㄙ': '公司', 'ㄘㄙ': '廁所', 'ㄙㄙ': '傘',

  // 第一個編碼：1
  'ㄉ1': '旅遊', 'ㄖ1': '左營', '11': '一',
}

// 生成記憶字的提示文字（用於編輯時）
export function getMemoryWordKey(code1: string, code2: string): string {
  return `${code1}${code2}`
}

// 獲取記憶字，如果沒有則返回"未定"
export function getMemoryWord(dict: MemoryWordDict, code1: string, code2: string): string {
  const key = getMemoryWordKey(code1, code2)
  return dict[key] || '未定'
}

// 將編碼序列轉換為帶記憶字的字串
// 格式：ㄎ ㄊ ㄔ ㄍ ㄙ ㄖ (痛苦 公車 未定)
// showWords: true 顯示記憶字，false 隱藏記憶字
export function formatMemoWithWords(memo: string, dict: MemoryWordDict, showWords: boolean = true): string {
  const codes = memo.split(' ').filter(c => c.length > 0)

  // 原始編碼保持不變
  const codesStr = codes.join(' ')

  if (!showWords) {
    return codesStr
  }

  // 收集記憶字（兩個一組）
  const words: string[] = []
  for (let i = 0; i < codes.length; i += 2) {
    const code1 = codes[i]
    const code2 = codes[i + 1]

    if (code2) {
      // 有配對
      const word = getMemoryWord(dict, code1, code2)
      words.push(word)
    }
    // 奇數個最後一個不配對，不加入記憶字
  }

  // 如果有記憶字，加上括號
  if (words.length > 0) {
    return `${codesStr} (${words.join(' ')})`
  }

  return codesStr
}
