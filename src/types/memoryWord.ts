// 記憶字典：兩個注音編碼組合成一個單字
export type MemoryWord = string

// 記憶字典表：key 是兩個編碼的組合 (例如 "ㄅㄅ", "ㄅㄆ")
export type MemoryWordDict = Record<string, MemoryWord>

// 默認記憶字典（根據用戶提供的表格）
export const DEFAULT_MEMORY_WORDS: MemoryWordDict = {
  // ㄅ 開頭
  'ㄅㄅ': '爸爸', 'ㄅㄆ': '屁鼻', 'ㄅㄇ': '麵包', 'ㄅㄈ': '富邦', 'ㄅㄉ': '大便', 'ㄅㄊ': '台北', 'ㄅㄋ': '內部', 'ㄅㄌ': '老闆',
  'ㄅㄍ': '隔壁', 'ㄅㄎ': '靠盃', 'ㄅㄏ': '夥伴', 'ㄅㄐ': '雞掰', 'ㄅㄑ': '全部', 'ㄅㄒ': '新北', 'ㄅㄓ': '職棒', 'ㄅㄔ': '翅膀',
  'ㄅㄕ': '失敗', 'ㄅㄖ': '日本', 'ㄅㄗ': '左邊', 'ㄅㄘ': '挫冰', 'ㄅㄙ': '三寶',

  // ㄆ 開頭
  'ㄆㄅ': '背叛', 'ㄆㄆ': '泡泡', 'ㄆㄇ': '名牌', 'ㄆㄈ': '放屁', 'ㄆㄉ': '搭配', 'ㄆㄊ': '圖片', 'ㄆㄋ': '牛排', 'ㄆㄌ': '老婆',
  'ㄆㄍ': '股票', 'ㄆㄎ': '卡片', 'ㄆㄏ': '害怕', 'ㄆㄐ': '機票', 'ㄆㄑ': '強迫', 'ㄆㄒ': '蝦皮', 'ㄆㄓ': '照片', 'ㄆㄔ': '產品',
  'ㄆㄕ': '商品', 'ㄆㄖ': '人品', 'ㄆㄗ': '自拍', 'ㄆㄘ': '裁判', 'ㄆㄙ': '賽跑',

  // ㄇ 開頭
  'ㄇㄅ': '幫忙', 'ㄇㄆ': '泡麵', 'ㄇㄇ': '媽媽', 'ㄇㄈ': '蜂蜜', 'ㄇㄉ': '動漫', 'ㄇㄊ': '他們', 'ㄇㄋ': '你們', 'ㄇㄌ': '拉麵',
  'ㄇㄍ': '感冒', 'ㄇㄎ': '開門', 'ㄇㄏ': '號碼', 'ㄇㄐ': '金門', 'ㄇㄑ': '簽名', 'ㄇㄒ': '下面', 'ㄇㄓ': '週末', 'ㄇㄔ': '充滿',
  'ㄇㄕ': '上面', 'ㄇㄖ': '熱門', 'ㄇㄗ': '怎麼', 'ㄇㄘ': '聰明', 'ㄇㄙ': '寺廟',

  // ㄈ 開頭
  'ㄈㄅ': '爆發', 'ㄈㄆ': '票房', 'ㄈㄇ': '模仿', 'ㄈㄈ': '夫婦', 'ㄈㄉ': '豆腐', 'ㄈㄊ': '頭髮', 'ㄈㄋ': '奶粉', 'ㄈㄌ': '魯夫',
  'ㄈㄍ': '公分', 'ㄈㄎ': '咖啡', 'ㄈㄏ': '合法', 'ㄈㄐ': '減肥', 'ㄈㄑ': '氣氛', 'ㄈㄒ': '稀飯', 'ㄈㄓ': '政府', 'ㄈㄔ': '吃飯',
  'ㄈㄕ': '師傅', 'ㄈㄖ': '染髮', 'ㄈㄗ': '自費', 'ㄈㄘ': '殘廢', 'ㄈㄙ': '私房',

  // ㄉ 開頭
  'ㄉㄅ': '病毒', 'ㄉㄆ': '屏東', 'ㄉㄇ': '媽的', 'ㄉㄈ': '飯店', 'ㄉㄉ': '弟弟', 'ㄉㄊ': '他的', 'ㄉㄋ': '你的', 'ㄉㄌ': '兩點',
  'ㄉㄍ': '更多', 'ㄉㄎ': '看到', 'ㄉㄏ': '活動', 'ㄉㄐ': '覺得', 'ㄉㄑ': '確定', 'ㄉㄒ': '兄弟', 'ㄉㄓ': '知道', 'ㄉㄔ': '超屌',
  'ㄉㄕ': '商店', 'ㄉㄖ': '弱點', 'ㄉㄗ': '自大', 'ㄉㄘ': '菜單', 'ㄉㄙ': '速度',

  // ㄊ 開頭
  'ㄊㄅ': '不同', 'ㄊㄆ': '葡萄', 'ㄊㄇ': '明天', 'ㄊㄈ': '飯糰', 'ㄊㄉ': '地圖', 'ㄊㄊ': '太太', 'ㄊㄋ': '奶頭', 'ㄊㄌ': '樂天',
  'ㄊㄍ': '高鐵', 'ㄊㄎ': '卡通', 'ㄊㄏ': '海灘', 'ㄊㄐ': '吉他', 'ㄊㄑ': '其他', 'ㄊㄒ': '夏天', 'ㄊㄓ': '枕頭', 'ㄊㄔ': '傳統',
  'ㄊㄕ': '石頭', 'ㄊㄖ': '軟體', 'ㄊㄗ': '昨天', 'ㄊㄘ': '餐廳', 'ㄊㄙ': '痠痛',

  // ㄋ 開頭
  'ㄋㄅ': '南部', 'ㄋㄆ': '叛逆', 'ㄋㄇ': '每年', 'ㄋㄈ': '憤怒', 'ㄋㄉ': '電腦', 'ㄋㄊ': '台南', 'ㄋㄋ': '尿尿', 'ㄋㄌ': '老娘',
  'ㄋㄍ': '過年', 'ㄋㄎ': '柯南', 'ㄋㄏ': '核能', 'ㄋㄐ': '今年', 'ㄋㄑ': '去年', 'ㄋㄒ': '虛擬', 'ㄋㄓ': '支那', 'ㄋㄔ': '成年',
  'ㄋㄕ': '少年', 'ㄋㄖ': '熱鬧', 'ㄋㄗ': '災難', 'ㄋㄘ': '菜鳥', 'ㄋㄙ': '思念',

  // ㄌ 開頭
  'ㄌㄅ': '玻璃', 'ㄌㄆ': '漂亮', 'ㄌㄇ': '麻辣', 'ㄌㄈ': '鳳梨', 'ㄌㄉ': '獨立', 'ㄌㄊ': '體力', 'ㄌㄋ': '能力', 'ㄌㄌ': '綠綠',
  'ㄌㄍ': '老公', 'ㄌㄎ': '恐龍', 'ㄌㄏ': '好了', 'ㄌㄐ': '記錄', 'ㄌㄑ': '去了', 'ㄌㄒ': '行李', 'ㄌㄓ': '這裡', 'ㄌㄔ': '吃力',
  'ㄌㄕ': '濕了', 'ㄌㄖ': '日曆', 'ㄌㄗ': '資歷', 'ㄌㄘ': '測量', 'ㄌㄙ': '死了',

  // ㄍ 開頭
  'ㄍㄅ': '包裹', 'ㄍㄆ': '蘋果', 'ㄍㄇ': '美國', 'ㄍㄈ': '法國', 'ㄍㄉ': '蛋糕', 'ㄍㄊ': '泰國', 'ㄍㄋ': '那個', 'ㄍㄌ': '寮國',
  'ㄍㄍ': '哥哥', 'ㄍㄎ': '跨國', 'ㄍㄏ': '韓國', 'ㄍㄐ': '幾個', 'ㄍㄑ': '全國', 'ㄍㄒ': '香港', 'ㄍㄓ': '這個', 'ㄍㄔ': '出國',
  'ㄍㄕ': '水果', 'ㄍㄖ': '如果', 'ㄍㄗ': '資格', 'ㄍㄘ': '參觀', 'ㄍㄙ': '三國',

  // ㄎ 開頭
  'ㄎㄅ': '避開', 'ㄎㄆ': '拋開', 'ㄎㄇ': '沒空', 'ㄎㄈ': '瘋狂', 'ㄎㄉ': '打開', 'ㄎㄊ': '痛苦', 'ㄎㄋ': '內褲', 'ㄎㄌ': '林口',
  'ㄎㄍ': '功課', 'ㄎㄎ': '可可', 'ㄎㄏ': '好看', 'ㄎㄐ': '雞塊', 'ㄎㄑ': '情況', 'ㄎㄒ': '汐科', 'ㄎㄓ': '折扣', 'ㄎㄔ': '乘客',
  'ㄎㄕ': '上課', 'ㄎㄖ': '入口', 'ㄎㄗ': '最快', 'ㄎㄘ': '刺客', 'ㄎㄙ': '思考',

  // ㄏ 開頭
  'ㄏㄅ': '百貨', 'ㄏㄆ': '澎湖', 'ㄏㄇ': '漫畫', 'ㄏㄈ': '粉紅', 'ㄏㄉ': '動畫', 'ㄏㄊ': '土豪', 'ㄏㄋ': '你好', 'ㄏㄌ': '老虎',
  'ㄏㄍ': '剛好', 'ㄏㄎ': '開花', 'ㄏㄏ': '畫畫', 'ㄏㄐ': '結婚', 'ㄏㄑ': '求婚', 'ㄏㄒ': '小孩', 'ㄏㄓ': '中華', 'ㄏㄔ': '吃喝',
  'ㄏㄕ': '社會', 'ㄏㄖ': '融化', 'ㄏㄗ': '組合', 'ㄏㄘ': '彩虹', 'ㄏㄙ': '送貨',

  // ㄐ 開頭
  'ㄐㄅ': '北京', 'ㄐㄆ': '啤酒', 'ㄐㄇ': '盲解', 'ㄐㄈ': '飛機', 'ㄐㄉ': '東京', 'ㄐㄊ': '條件', 'ㄐㄋ': '南京', 'ㄐㄌ': '垃圾',
  'ㄐㄍ': '冠軍', 'ㄐㄎ': '柯基', 'ㄐㄏ': '黃金', 'ㄐㄐ': '雞雞', 'ㄐㄑ': '奇蹟', 'ㄐㄒ': '香蕉', 'ㄐㄓ': '炸雞', 'ㄐㄔ': '出局',
  'ㄐㄕ': '手機', 'ㄐㄖ': '日記', 'ㄐㄗ': '自己', 'ㄐㄘ': '餐具', 'ㄐㄙ': '司機',

  // ㄑ 開頭
  'ㄑㄅ': '北七', 'ㄑㄆ': '脾氣', 'ㄑㄇ': '默契', 'ㄑㄈ': '番茄', 'ㄑㄉ': '地球', 'ㄑㄊ': '天氣', 'ㄑㄋ': '拿起', 'ㄑㄌ': '籃球',
  'ㄑㄍ': '國旗', 'ㄑㄎ': '孔雀', 'ㄑㄏ': '環球', 'ㄑㄐ': '機器', 'ㄑㄑ': '氣球', 'ㄑㄒ': '星球', 'ㄑㄓ': '桌球', 'ㄑㄔ': '傳奇',
  'ㄑㄕ': '生氣', 'ㄑㄖ': '日期', 'ㄑㄗ': '子祁', 'ㄑㄘ': '刺青', 'ㄑㄙ': '死去',

  // ㄒ 開頭
  'ㄒㄅ': '冰箱', 'ㄒㄆ': '螃蟹', 'ㄒㄇ': '麵線', 'ㄒㄈ': '分享', 'ㄒㄉ': '大型', 'ㄒㄊ': '同學', 'ㄒㄋ': '逆向', 'ㄒㄌ': '濾芯',
  'ㄒㄍ': '高雄', 'ㄒㄎ': '可惜', 'ㄒㄏ': '海嘯', 'ㄒㄐ': '簡訊', 'ㄒㄑ': '傾向', 'ㄒㄒ': '蝦', 'ㄒㄓ': '中信', 'ㄒㄔ': '出現',
  'ㄒㄕ': '數學', 'ㄒㄖ': '熱心', 'ㄒㄗ': '造型', 'ㄒㄘ': '從小', 'ㄒㄙ': '三星',

  // ㄓ 開頭
  'ㄓㄅ': '報紙', 'ㄓㄆ': '拍照', 'ㄓㄇ': '面紙', 'ㄓㄈ': '非洲', 'ㄓㄉ': '地震', 'ㄓㄊ': '桃子', 'ㄓㄋ': '鬧鐘', 'ㄓㄌ': '荔枝',
  'ㄓㄍ': '果汁', 'ㄓㄎ': '口罩', 'ㄓㄏ': '會長', 'ㄓㄐ': '記者', 'ㄓㄑ': '確診', 'ㄓㄒ': '汐止', 'ㄓㄓ': '中職', 'ㄓㄔ': '車站',
  'ㄓㄕ': '時鐘', 'ㄓㄖ': '忍者', 'ㄓㄗ': '雜誌', 'ㄓㄘ': '殘障', 'ㄓㄙ': '四肢',

  // ㄔ 開頭
  'ㄔㄅ': '白痴', 'ㄔㄆ': '破產', 'ㄔㄇ': '抹茶', 'ㄔㄈ': '帆船', 'ㄔㄉ': '電池', 'ㄔㄊ': '湯匙', 'ㄔㄋ': '奶茶', 'ㄔㄌ': '纜車',
  'ㄔㄍ': '公車', 'ㄔㄐ': '雞翅', 'ㄔㄒ': '小吃',

  // ㄕ 開頭
  'ㄕㄇ': '法師', 'ㄕㄊ': '天使', 'ㄕㄌ': '可是', 'ㄕㄍ': '或是', 'ㄕㄖ': '認識',

  // ㄖ 開頭
  'ㄖㄌ': '烤肉', 'ㄖㄑ': '確認',

  // ㄗ 開頭
  'ㄗㄗ': '存在',

  // ㄘ 開頭
  'ㄘㄐ': '下次', 'ㄘㄖ': '仁慈', 'ㄘㄅ': '早餐',

  // ㄙ 開頭
  'ㄙㄅ': '比賽', 'ㄙㄇ': '民宿', 'ㄙㄈ': '粉絲', 'ㄙㄊ': 'Nurse', 'ㄙㄍ': '公司', 'ㄙㄘ': '廁所', 'ㄙㄙ': '傘',

  // 1 開頭
  '1ㄉ': '旅遊', '1ㄖ': '左營', '11': '一',
}

// 生成記憶字的提示文字（用於編輯時）
export function getMemoryWordKey(code1: string, code2: string): string {
  return `${code1}${code2}`
}

// 獲取記憶字，如果沒有則返回"未定"
export function getMemoryWord(dict: MemoryWordDict, code1: string, code2: string): string {
  const key = getMemoryWordKey(code1, code2)
  return dict[key] || '未定'
}

// 將編碼序列轉換為帶記憶字的字串
// 格式：ㄎ ㄊ ㄔ ㄍ ㄙ ㄖ (痛苦 公車 未定)
// showWords: true 顯示記憶字，false 隱藏記憶字
export function formatMemoWithWords(memo: string, dict: MemoryWordDict, showWords: boolean = true): string {
  const codes = memo.split(' ').filter(c => c.length > 0)

  // 原始編碼保持不變
  const codesStr = codes.join(' ')

  if (!showWords) {
    return codesStr
  }

  // 收集記憶字（兩個一組）
  const words: string[] = []
  for (let i = 0; i < codes.length; i += 2) {
    const code1 = codes[i]
    const code2 = codes[i + 1]

    if (code2) {
      // 有配對
      const word = getMemoryWord(dict, code1, code2)
      words.push(word)
    }
    // 奇數個最後一個不配對，不加入記憶字
  }

  // 如果有記憶字，加上括號
  if (words.length > 0) {
    return `${codesStr} (${words.join(' ')})`
  }

  return codesStr
}
